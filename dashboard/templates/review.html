{% extends "base.html" %}

{% block title %}Review {{ decision.id[:8] }} - CSTP Dashboard{% endblock %}

{% block header %}
<div class="page-header">
    <div class="page-breadcrumb">
        <a href="{{ url_for('decisions') }}">Decisions</a>
        <span class="page-breadcrumb-sep"></span>
        <a href="{{ url_for('decision_detail', decision_id=decision.id[:8]) }}">{{ decision.id[:8] }}</a>
        <span class="page-breadcrumb-sep"></span>
        <span>Review</span>
    </div>
    <h1 class="page-title">Review Outcome</h1>
    <p class="page-subtitle">{{ decision.summary[:80] }}</p>
</div>
{% endblock %}

{% block content %}
<!-- Decision Summary Card -->
<div class="card mb-6">
    <div class="card-body">
        <p style="margin:0; color: var(--c-text-primary); font-weight: var(--fw-medium)">{{ decision.summary }}</p>
        <p class="mt-2 text-sm text-muted" style="margin-bottom:0">Original confidence: {{ decision.confidence_pct }}%</p>
    </div>
</div>

<!-- Review Form -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title" style="margin:0">Record Outcome</h2>
    </div>
    <div class="card-body">
        <form method="post">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <div class="form-group">
                <label class="form-label">Outcome *</label>
                <div class="form-radio-group">
                    <label class="form-radio-label">
                        <input type="radio" name="outcome" value="success" required>
                        ‚úÖ Success - Decision worked as expected
                    </label>
                    <label class="form-radio-label">
                        <input type="radio" name="outcome" value="partial">
                        ‚ö†Ô∏è Partial - Partially worked, adjustments needed
                    </label>
                    <label class="form-radio-label">
                        <input type="radio" name="outcome" value="failure">
                        ‚ùå Failure - Did not work, changed approach
                    </label>
                    <label class="form-radio-label">
                        <input type="radio" name="outcome" value="abandoned">
                        üö´ Abandoned - Never implemented
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="actual_result">What actually happened? *</label>
                <textarea id="actual_result" name="actual_result" class="form-textarea" required placeholder="Describe the actual outcome..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label" for="lessons">Lessons learned (optional)</label>
                <textarea id="lessons" name="lessons" class="form-textarea" style="min-height: 80px" placeholder="What did you learn from this decision?"></textarea>
            </div>

            <div class="flex gap-3">
                <a href="{{ url_for('decision_detail', decision_id=decision.id[:8]) }}" class="btn btn--secondary">Cancel</a>
                <button type="submit" class="btn btn--primary">Submit Review</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
